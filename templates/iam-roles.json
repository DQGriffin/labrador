{
    "defaults": {
        "trustPolicy": {
            "principals": {
                "services": [
                    "lambda.amazonaws.com"
                ],
                "aws": []
            },
            "file": "./templates/policies/lambda-assume.json"
        },
        "tags": {
            "app": "{{project_name}}"
        }
    },
    "roles": [
        {
            "name": "{{project_name}}-user-supplied-assume-role",
            "description": "Basic lambda role for {{project_name}}",
            "ref": "lambda-user-supplied-role-ref",
            "policyArns": [
                "arn:aws:iam::aws:policy/AWSLambda_FullAccess",
                "arn:aws:iam::aws:policy/AIOpsAssistantPolicy"
            ],
            "inlinePolicies": [
                {
                    "name": "read-s3-file",
                    "actions": [
                        "s3:GetObject",
                        "s3:ListBucket"
                    ],
                    "resources": [
                        "arn:aws:s3:::*"
                    ],
                    "effect": "Allow",
                    "file": "./templates/policies/basic-s3.json"
                }
            ]
        },
        {
            "name": "{{project_name}}-auto-assume-role",
            "description": "Basic lambda role for {{project_name}}",
            "ref": "lambda-basic-role-ref",
            "trustPolicy": {
                "principals": {
                    "services": [
                        "lambda.amazonaws.com",
                        "ec2.amazonaws.com"
                    ],
                    "aws": []
                }
            },
            "policyArns": [
                "arn:aws:iam::aws:policy/AWSLambda_FullAccess",
                "arn:aws:iam::aws:policy/AIOpsAssistantPolicy"
            ],
            "inlinePolicies": [
                {
                    "name": "read-s3",
                    "actions": [
                        "s3:GetObject",
                        "s3:ListBucket"
                    ],
                    "resources": [
                        "arn:aws:s3:::*"
                    ],
                    "effect": "Allow"
                }
            ]
        }
    ]
}